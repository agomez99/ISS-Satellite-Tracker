<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <style>

    body {
      background-color: white;
    }
    svg {
    	border: 2px solid black;
    	background-color: #a4bac7;
    }

	.land {
	  fill: #d7c7ad;
	  stroke: #766951;
	  z-index: 1;
	}

	.boundary {
	  fill: none;
	  stroke: #a5967e;
	}

	.graticule {
	  fill: none;
	  stroke: #fff;
	  stroke-width: .5px;
	}

	.graticule :nth-child(2n) {
	  stroke-dasharray: 2,2;
	}	

  </style>

</head>

<body>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script src="https://d3js.org/topojson.v0.min.js"></script>
	<script>
		var width = 960,
		    height = 480,
            zoom = 1;

        
        


		var svg = d3.select("body").append("svg")
		    .attr("width", width)
		    .attr("height", height);

		var projection = d3.geo.equirectangular()
			.scale(153)
		    .translate([width/2,height/2])


		var path = d3.geo.path()
		    .projection(projection);

		var graticule = d3.geo.graticule();

		var lat = 30.159529;
		var lon = -92.0275494;

		let x = (lon + 180) * (width / 360)

		let latRad = lat * Math.PI/180;

		let mercN = Math.log(Math.tan((Math.PI/4)+ (latRad/2)));

		let y = (height/2) - (width*mercN/(2*Math.PI));


		

		d3.json("https://gist.githubusercontent.com/abenrob/787723ca91772591b47e/raw/8a7f176072d508218e120773943b595c998991be/world-50m.json", function(error, world) {
		  	svg.append("g")
		  		.attr("class", "land")
				.selectAll("path")
		  		.data([topojson.object(world, world.objects.land)])
			    .enter().append("path")
			    .attr("d", path);
			svg.append("g")
		  		.attr("class", "boundary")
				.selectAll("boundary")
		  		.data([topojson.object(world, world.objects.countries)])
			    .enter().append("path")
			    .attr("d", path);
			svg.append("g")
				.attr("class", "graticule")
				.selectAll("path")
				.data(graticule.lines)
				.enter().append("path")
				.attr("d", path);

				drawPoint();
			
		});

        
		function drawPoint(){
			svg.append("circle")
				.attr("cx", x)
				.attr("cy", y)
				.attr("r", 10)
				.style("z-index", 2)
				.attr("fill", "yellow")

		}
	
	
	
	

				
			
			
		
					


            

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
			/* 	let cx = mercX(0);
		let cy = mercY(0);
		
		mercX(25.761681);
		mercY(25.761681); */

		
		
		/* console.log(mercX(-122.419418)- cx);
		console.log(mercY(37.774929)- cy);

        function mercX(degreesLon){
			lon = radians(degreesLon);
            var a = (256 / Math.PI) * Math.pow(2, zoom);
            var b = lon + Math.PI;
			let x = a * b;
			if (x < -width/2){
				x += width;
			} else if ( x> width /2){
				x-= width;
			}
            return(x);
            
        }

		function mercY(degreesLat){
			lat = radians(degreesLat);
			var a = (256/ Math.PI) * Math.pow(2,zoom);
			var b = Math.tan(Math.PI/4 + lat/2);
			var c = Math.PI - Math.log(b);
			return a * c;
		}

		
		function radians(x){
			return x * (Math.PI / 100);
		} */
		
		
	</script>
</body>
</html>